SECTION .BSS
    BUFF RESB 1

SECTION .DATA

SECTION .TEXT
GLOBAL _START

_START:
    NOP                         ;FOR DEBUGGER
READ: MOV EAX,3                 ;SPECIFY SYS_READ CALL
    MOV EBX,0                   ;SPECIFY FILE DESCRIPTER 0, STDIN
    MOV ECX,BUFF                ;PASS BUFF ADDRESS TO ECX
    MOV EDX,1                   ;TELL SYS_READ TO READ ONE CHARACTER FROM STDIN
    INT 80H                     ;CALL SYS_READ

    CMP EAX,0                   ;COMPARE SYS_READ RETURN VALUE
    JE EXIT                     ;JUMP TO EXIT IF EQUAL TO 0
    ;FALL THOURGH NEXT INSTRUCTION

    CMP BYTE [BUFF],61H         ;TEST INPUT CHARACTER AGAINST LOWERCASE 'A'
    JB WRITE                    ;IF BELOW THAN 'A' THEN NOT LOWERCASE
    CMP BYTE [BUFF],7AH         ;TEST INPUT CHARACTER AGAINST LOWERCASE 'Z'
    JA WRITE                    ;IF ABOVE THAN 'Z' THEN NOT LOWERCASE
    ;WE HAVE LOWERCASE CHARACTER ONLY NOW

    SUB BYTE [BUFF],20H         ;SUBSTARACT 20H FROM BUFF CHARACTER
    ;WRITE OUT TO STDOUT NOW

WRITE: MOV EAX,4                ;SPECIFY SYS_WRITE CALL
    MOV EBX,1                   ;SPECIFY FILE DECRIPTER 1, STDOUT
    MOV ECX,BUFF                ;PASS ADDRESS OF CHARACTER TO WRITE
    MOV EDX,1                   ;PASS NUMBER OF CHARACTERS TO WRITE
    INT 80H                     ;CALL SYS_WRITE
    JMP READ                    ;JUMP TO READ TO READ ANOTHER CHARACTER

EXIT:MOV EAX,1                  ;SPECIFY SYS_EXIT CALL
    MOV EBX,0                   ;SPECIFY RETURN VALUE 0
    INT 80H                     ;CALL SYS_EXIT
    
